trigger:
- main

pool:
  vmImage: 'windows-latest'

steps:
- task: UseDotNet@2
  inputs:
    packageType: 'sdk'
    version: '8.0'
    installationPath: $(Agent.ToolsDirectory)/dotnet

- script: dotnet build $(Build.SourcesDirectory)/BlazorHelloWorld -c Release
  displayName: 'Build Blazor app'

- script: dotnet publish $(Build.SourcesDirectory)/BlazorHelloWorld -c Release -o $(Build.ArtifactStagingDirectory)
  displayName: 'Publish Blazor app'

- task: AzureWebApp@1
  inputs:
    azureSubscription: 'Azure subscription 1' # Azure 구독 이름 또는 서비스 연결 이름
    appType: 'webAppLinux' # 또는 webAppWindows, 웹앱의 호스팅 환경에 따라 선택
    appName: 'AzureDevOpsShua' # Azure Web App 이름
    runtimeStack: 'DOTNETCORE|3.1' # Blazor 애플리케이션에 적합한 런타임 스택
    package: $(Build.ArtifactStagingDirectory) # 배포할 패키지의 위치