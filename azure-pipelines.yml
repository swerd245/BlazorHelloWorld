trigger:
- main

pool:
  vmImage: 'windows-latest'

steps:
- task: UseDotNet@2
  inputs:
    packageType: 'sdk'
    version: '8.0.x' # .NET 8.0을 지원하는 SDK 버전으로 업데이트
    includePreviewVersions: true # .NET 8.0이 아직 프리뷰 상태인 경우 활성화
    installationPath: $(Agent.ToolsDirectory)/dotnet

# Blazor 프로젝트 빌드
- script: |
    dotnet build $(Build.SourcesDirectory)\BlazorHelloWorld.csproj -c Release
  displayName: 'Build Blazor app'

# Blazor 앱 발행
- script: |
    dotnet publish $(Build.SourcesDirectory)\BlazorHelloWorld.csproj -c Release -o $(Build.ArtifactStagingDirectory)
  displayName: 'Publish Blazor app'

# Azure Web App 배포
- task: AzureWebApp@1
  inputs:
    azureSubscription: 'Azure subscription 1'
    appType: 'webAppWindows'
    appName: 'AzureDevOpsShua'
    runtimeStack: 'DOTNET|8.0' # 프로젝트와 일치하는 .NET 버전으로 수정
    package: $(Build.ArtifactStagingDirectory)
